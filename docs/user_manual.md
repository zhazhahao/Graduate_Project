# 行人重识别系统用户手册

## 一、系统简介

本系统是一个基于深度学习的行人重识别(ReID)系统，可以在不同摄像头视角下识别同一个人。系统提供了完整的训练、评估和演示功能，支持CBAM和LGCA两种模型架构。

## 二、安装指南

### 2.1 环境要求

- Python 3.7+
- PyTorch 1.12+
- CUDA 11.3+
- Flask 2.0+

### 2.2 安装步骤

1. **克隆项目**
   ```bash
   git clone [项目地址]
   cd graduate_project
   ```

2. **安装依赖**
   ```bash
   pip install -r requirements.txt
   ```

3. **准备数据集**
   - 下载Market-1501数据集
   - 将数据集放在 `market1501` 目录下
   - 运行数据集组织脚本：
     ```bash
     python organize_dataset.py
     ```

## 三、使用指南

### 3.1 训练模型

1. **配置参数**
   - 打开 `config.py`
   - 根据需要修改配置参数：
     ```python
     # 数据集配置
     DATASET_ROOT = 'market1501'
     TRAIN_BATCH_SIZE = 32
     
     # 模型配置
     MODEL_NAME = 'cbam'  # 或 'lgca'
     NUM_CLASSES = 751
     
     # 训练配置
     LEARNING_RATE = 0.0003
     NUM_EPOCHS = 120
     ```

2. **开始训练**
   ```bash
   python train.py
   ```

3. **查看训练过程**
   - 训练日志保存在 `runs` 目录
   - 可视化结果保存在 `visualization` 目录

### 3.2 运行演示系统

1. **启动Web服务**
   ```bash
   cd reid_demo
   python app.py
   ```

2. **访问界面**
   - 打开浏览器
   - 访问 `http://localhost:5000`

3. **使用演示系统**
   - 上传查询图片
   - 查看识别结果
   - 浏览相似行人图片

## 四、功能说明

### 4.1 模型训练

1. **CBAM模型**
   - 使用通道注意力和空间注意力机制
   - 适合处理全局特征

2. **LGCA模型**
   - 结合局部和全局特征
   - 适合处理细节特征

### 4.2 可视化功能

1. **训练曲线**
   - 损失曲线
   - 准确率曲线
   - 学习率变化

2. **评估指标**
   - 训练指标
   - 验证指标
   - 模型性能对比

### 4.3 演示系统

1. **图片上传**
   - 支持jpg、png格式
   - 建议图片大小不超过5MB

2. **结果展示**
   - 相似度排序
   - 置信度显示
   - 可视化展示

## 五、常见问题

### 5.1 安装问题

1. **依赖安装失败**
   - 检查Python版本
   - 更新pip
   - 使用国内镜像源

2. **CUDA相关错误**
   - 检查CUDA版本
   - 确认PyTorch安装正确

### 5.2 使用问题

1. **训练不收敛**
   - 调整学习率
   - 检查数据预处理
   - 调整批次大小

2. **内存不足**
   - 减小批次大小
   - 使用梯度累积
   - 清理GPU缓存

### 5.3 演示系统问题

1. **上传失败**
   - 检查文件格式
   - 确认文件大小
   - 检查网络连接

2. **识别效果差**
   - 检查图片质量
   - 调整模型参数
   - 使用更好的模型

## 六、联系方式

如有问题，请通过以下方式联系：

- 项目维护者：[联系方式]
- 问题反馈：[反馈地址]
- 文档更新：[文档地址] 